<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cat√°logo semanal ‚Äì Pedidos hasta el jueves</title>
  <meta name="description" content="Cat√°logo semanal para pedidos por WhatsApp. Pedidos hasta el jueves." />

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1620;
      --panel2:#0c121a;
      --text:#e9eef6;
      --muted:#a7b4c7;
      --border:rgba(255,255,255,.10);
      --btn:#153a2c;
      --btn2:#1b4a36;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
      background: radial-gradient(1200px 600px at 50% -80px, rgba(40,80,120,.30), transparent 60%),
                  radial-gradient(900px 500px at 20% 0, rgba(40,120,80,.18), transparent 60%),
                  var(--bg);
      color:var(--text);
    }
    a{color:inherit}

    /* ‚úÖ HEADER: sticky SOLO t√≠tulo + subt√≠tulo (bien finito) */
    header{
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: rgba(11,15,20,.85);
      border-bottom: 1px solid var(--border);
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 14px 14px;
    }
    .title{
      font-size: clamp(20px, 4.3vw, 34px);
      line-height: 1.15;
      margin: 2px 0 8px;
      font-weight: 800;
      letter-spacing: .2px;
    }
    .subtitle{
      margin:0;
      color: var(--muted);
      font-size: 13.5px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .subtitle span{
      opacity:.95;
      white-space: nowrap;
    }

    main{padding: 10px 14px 24px}
    .container{
      max-width: 980px;
      margin: 0 auto;
    }

    /* ‚úÖ CONTROLES: YA NO SON sticky, scrollean con la p√°gina */
    .controls{
      margin-top: 12px;
      display:grid;
      gap: 10px;
    }
    .row3{
      display:grid;
      gap:10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 700px){
      .row3{grid-template-columns: 1fr 1fr 1fr;}
    }

    .input, select{
      width:100%;
      border:1px solid var(--border);
      background: rgba(15,22,32,.65);
      color: var(--text);
      padding: 13px 14px;
      border-radius: 14px;
      outline:none;
      box-shadow: 0 1px 0 rgba(255,255,255,.03) inset;
    }
    .input::placeholder{color:rgba(167,180,199,.75)}
    select{appearance:none}

    .grid{
      margin-top: 14px;
      display:grid;
      gap: 14px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 700px){
      .grid{grid-template-columns: 1fr 1fr;}
    }

    .card{
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(15,22,32,.62), rgba(12,18,26,.62));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .hero{
      position: relative;
      background: #05080d;
      aspect-ratio: 4 / 3;
      overflow:hidden;
    }
    .hero img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      transform: scale(1.01);
    }

    .thumbs{
      display:flex;
      gap:10px;
      padding: 10px 12px 0;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }
    .thumbs::-webkit-scrollbar{height:8px}
    .thumbs::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12); border-radius:999px}
    .thumb{
      flex: 0 0 auto;
      width: 58px;
      height: 44px;
      border-radius: 12px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      opacity: .82;
      cursor:pointer;
    }
    .thumb.active{
      opacity: 1;
      border-color: rgba(120,220,160,.65);
      box-shadow: 0 0 0 2px rgba(120,220,160,.18);
    }
    .thumb img{width:100%; height:100%; object-fit: cover; display:block}

    .content{
      padding: 10px 14px 14px;
    }

    .tagrow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin: 8px 0 10px;
    }
    .tag{
      font-size: 12.5px;
      color: rgba(233,238,246,.92);
      border: 1px solid rgba(255,255,255,.11);
      background: rgba(10,14,20,.35);
      padding: 7px 10px;
      border-radius: 999px;
      white-space: nowrap;
    }

    .name{
      margin: 6px 0 6px;
      font-size: 20px;
      font-weight: 800;
      letter-spacing:.2px;
    }
    .note{
      margin:0 0 12px;
      color: var(--muted);
      font-size: 13.5px;
    }

    .priceRow{
      display:flex;
      justify-content:space-between;
      gap: 14px;
      align-items:flex-end;
      padding: 10px 0 12px;
      border-top: 1px dashed rgba(255,255,255,.12);
      margin-top: 10px;
    }
    .priceLabel{
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 4px;
    }
    .price{
      font-size: 28px;
      font-weight: 900;
      letter-spacing:.3px;
    }
    .rightHint{
      text-align:right;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.25;
    }

    .btn{
      width:100%;
      border: 1px solid rgba(120,220,160,.22);
      background: linear-gradient(180deg, var(--btn2), var(--btn));
      color: #eafff2;
      font-weight: 850;
      font-size: 16.5px;
      padding: 14px 16px;
      border-radius: 16px;
      cursor:pointer;
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
    }
    .btn:active{transform: translateY(1px)}

    footer{
      max-width: 980px;
      margin: 0 auto;
      padding: 18px 14px 30px;
      color: rgba(167,180,199,.75);
      font-size: 12.5px;
      text-align:center;
    }

    /* Modal (galer√≠a grande) */
    .modal{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.7);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 50;
      padding: 16px;
    }
    .modal.open{display:flex}
    .modalBox{
      width:min(980px, 100%);
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,14,20,.92);
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
    }
    .modalTop{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      color: rgba(233,238,246,.92);
      font-size: 13px;
    }
    .xbtn{
      background: transparent;
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(233,238,246,.9);
      border-radius: 12px;
      padding: 7px 10px;
      cursor:pointer;
    }
    .modalImg{
      width:100%;
      height: min(72vh, 620px);
      background:#05080d;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .modalImg img{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
      display:block;
    }
    .modalThumbs{
      display:flex;
      gap:10px;
      padding: 12px;
      overflow:auto;
      border-top: 1px solid rgba(255,255,255,.10);
    }
  </style>
</head>

<body>
  <header>
    <div class="wrap">
      <h1 class="title">Cat√°logo semanal ‚Äì Calzados Importados Premium</h1>
      <p class="subtitle">
        <span>Ingresos de la semana</span>
        <span>¬∑</span>
        <span>Stock limitado</span>
        <span>¬∑</span>
        <span>Solo por encargo</span>
      </p>
    </div>
  </header>

  <main>
    <div class="container">
      <!-- ‚úÖ filtros scrollean (NO sticky) -->
      <section class="controls">
        <input id="q" class="input" placeholder="Buscar (ej: ojotas, mujer, infantil, botines...)" />  

        <div class="row3">
          <select id="cat">
            <option value="">Todas las categor√≠as</option>
          </select>

          <select id="type">
            <option value="">Todos los tipos</option>
          </select>

          <select id="brand">
            <option value="">Todas las marcas</option>
          </select>
        </div>
      </section>

      <section id="grid" class="grid"></section>
    </div>
  </main>

  <footer>
    Pedidos por WhatsApp: <strong>11 6724-8975</strong>
  </footer>

  <!-- Modal galer√≠a -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modalBox">
      <div class="modalTop">
        <div id="modalTitle">Galer√≠a</div>
        <button class="xbtn" id="closeModal">Cerrar ‚úï</button>
      </div>
      <div class="modalImg">
        <img id="modalImg" src="" alt="Imagen del producto" />
      </div>
      <div id="modalThumbs" class="modalThumbs"></div>
    </div>
  </div>

  <script>
    // ‚úÖ Tu WhatsApp (con prefijo pa√≠s Argentina 54)
    const WHATSAPP_NUMBER = "5491167248975";

    // =============================
    // DATA: productos
    // - "images": pod√©s cargar varias fotos del MISMO modelo (distintos colores)
    // - NO usamos "REF"
    // - "note": aclaraci√≥n tipo "Talles en cada foto"
    // =============================
    const PRODUCTS = [
        {
        id: "9",
        name: "Zapatillas Topper",
        category: "Hombre",
        type: "Zapatillas",
        brand: "Linea Premium", 
        price: 33000,
        quality: [], 
        note: "Talles 38 al 43",
        images: [
            "IMG-20251215-WA0036.jpg",
          
        ]
      },

      {
        id: "10",
        name: "Adidas Campus",
        category: "Hombre/Mujer",
        type: "Zapatillas",
        brand: "Linea Premium", 
        price: 27000,
        quality: [], 
        note: "Talles disponibles en la foto.",
        images: [
          "IMG-20251217-WA0007.jpg",
          "IMG-20251217-WA0008.jpg",
          "IMG-20251217-WA0009.jpg",
          "IMG-20251217-WA0010.jpg",
          "IMG-20251217-WA0011.jpg",
          "IMG-20251217-WA0012.jpg",
          "IMG-20251217-WA0013.jpg",
          "IMG-20251217-WA0014.jpg",
          "IMG-20251217-WA0015.jpg",
          "IMG-20251217-WA0016.jpg",
          "IMG-20251217-WA0017.jpg",
          "IMG-20251217-WA0018.jpg",
          "IMG-20251217-WA0019.jpg",
        ]
      },

      {
        id: "11",
        name: "Borcego Caterpillar",
        category: "Hombre",
        type: "Borcego",
        brand: "Linea Premium", 
        price: 32000, 
        note: "Talles 34 al 39",
        images: [
            "IMG-20251217-WA0020.jpg",
        ]
      },

      {
        id: "12",
        name: "JORDANJ27",
        brand: "Zapatillas", 
        price: 50000, 
        quality: ["Premium", "Bolsita Personalizada"],
        note: "Talles 34 al 39",
        images: [
            "IMG-20251217-WA0021.jpg",
        ]
      },

      {
        id: "13",
        name: "Jordan",
        brand: "Zapatillas", 
        price: 31000, 
        quality: ["Premium",],
        note: "Talles 34 al 38",
        images: [
            "IMG-20251217-WA0022.jpg",
        ]
      },

      {
        id: "1",
        name: "Botines Infantil Campo",
        category: "Infantil",
        type: "Botines",
        brand: "Nike", // ‚úÖ corregido (antes dec√≠a Adidas)
        price: 29000,
        quality: ["Premium", "S√∫per Luxo"], // ‚úÖ ambos
        note: "Talles en cada foto üòâüëÜ (eleg√≠ la foto/opci√≥n)",
        numbersHint: "ver en cada foto",
        images: [
          // ‚úÖ fotos que ya subiste al repo (mismo modelo con colores/fotos)
          "IMG-20251217-WA0129.jpg",
          "IMG-20251217-WA0130.jpg",
          "IMG-20251217-WA0131.jpg",
          "IMG-20251217-WA0132.jpg",
          "IMG-20251217-WA0133.jpg",
          "IMG-20251217-WA0134.jpg",
          "IMG-20251217-WA0135.jpg",
        ]
      },

      // üëá Este es un ejemplo de otro producto (ojotas mujer)
      // Reemplaz√° las im√°genes por los nombres reales que subas al repo.
      {
        id: "2",
        name: "Ojotas tipo slide",
        category: "Mujer/Hombre",
        type: "Ojotas",
        brand:  "Adidas/Nike",
        price: 19000,
        quality: ["Premium"],
        note: " Suela MICRO EXPANDIDO PURO. Forrado y costurada. Super confortable. √ìptima terminaci√≥nes. FOTO REAL. TALLES: 38/38 al 42/43",
        numbersHint: "ver en cada foto",
        images: [
          "IMG-20251216-WA0022.jpg",
          "IMG-20251216-WA0023.jpg",
          "IMG-20251216-WA0026.jpg",
          "IMG-20251216-WA0027.jpg",
          "IMG-20251216-WA0028.jpg",
          "IMG-20251216-WA0029.jpg",
          "IMG-20251216-WA0030.jpg",
          "IMG-20251216-WA0031.jpg",
          "IMG-20251216-WA0032.jpg",
          "IMG-20251216-WA0033.jpg",
          "IMG-20251216-WA0034.jpg",
          "IMG-20251216-WA0035.jpg",
          "IMG-20251216-WA0036.jpg",
          "IMG-20251216-WA0037.jpg",
          "IMG-20251216-WA0038.jpg"
        ]
      },

      {
        id: "3",
        name: "Ojotas con bandas",
        category: "Hombre",
        type: "Ojotas",
        brand: "Varios", 
        price: 13000,
        quality: ["Premium"], 
        note: "37 al 48 ",
        numbersHint: "ver en cada foto",
        images: [
          "IMG-20251212-WA0064.jpg",
          "IMG-20251212-WA0065.jpg",
          "IMG-20251212-WA0066.jpg",
          "IMG-20251212-WA0067.jpg",
          "IMG-20251212-WA0068.jpg",
          "IMG-20251212-WA0069.jpg",
          "IMG-20251212-WA0070.jpg",
          "IMG-20251212-WA0071.jpg",
          "IMG-20251212-WA0072.jpg",
          "IMG-20251212-WA0073.jpg",
          "IMG-20251212-WA0074.jpg",
          "IMG-20251212-WA0075.jpg",
          "IMG-20251212-WA0076.jpg",
          "IMG-20251212-WA0077.jpg",
        ]
      },

       {
        id: "4",
        name: "Ojotas con bandas en caja",
        category: "Hombre/Mujer",
        type: "Ojotas",
        brand: "Havahianas", 
        price: 19000,
        quality: ["Premium"], 
        note: "37 al 44 ",
        numbersHint: "ver en cada foto",
        images: [
          "IMG-20251216-WA0021.jpg",
          "IMG-20251216-WA0013.jpg",
          "IMG-20251216-WA0014.jpg",
          "IMG-20251216-WA0015.jpg",
          "IMG-20251216-WA0016.jpg",
          "IMG-20251216-WA0017.jpg",
        ]
      },
      
      {
        id: "5",
        name: "Ojotas caterpillar",
        category: "Hombre",
        type: "Ojotas",
        brand: "Caterpillar", 
        price: 24000,
        quality: ["Premium"], 
        note: "37 al 44 Cuero costurado",
        numbersHint: "Cuero costurado",
        images: [
          "IMG-20251212-WA0080.jpg",
          "IMG-20251212-WA0081.jpg",
          "IMG-20251212-WA0082.jpg",
        ]
      },

      {
        id: "6",
        name: "ojotas/sandalias",
        category: "Hombre/Mujer",
        type: "Ojotas/sandalias",
        brand: "Varios", 
        price: 19000,
        quality: ["Premium"], 
        note: "N√∫meros disponibles solo los que estan en cada foto üëÜ. √öltimos pares ‚ò∫",
        images: [
          "IMG-20251216-WA0095.jpg",
          "IMG-20251216-WA0096.jpg",
          "IMG-20251216-WA0100.jpg",
          "IMG-20251216-WA0101.jpg",
          "IMG-20251216-WA0102.jpg",
          "IMG-20251216-WA0103.jpg",
          "IMG-20251216-WA0104.jpg",
          "IMG-20251216-WA0105.jpg",
          "IMG-20251216-WA0106.jpg",
          "IMG-20251216-WA0107.jpg",
          "IMG-20251216-WA0108.jpg",
          "IMG-20251216-WA0109.jpg",
          "IMG-20251216-WA0110.jpg",
          "IMG-20251216-WA0111.jpg",
          "IMG-20251216-WA0112.jpg",
          "IMG-20251216-WA0113.jpg",
          "IMG-20251216-WA0114.jpg",
          "IMG-20251216-WA0115.jpg",
          "IMG-20251216-WA0116.jpg",
          "IMG-20251216-WA0117.jpg",
          "IMG-20251216-WA0118.jpg",
          "IMG-20251216-WA0119.jpg",
          "IMG-20251216-WA0120.jpg",
          "IMG-20251216-WA0121.jpg",
          "IMG-20251216-WA0122.jpg",
          "IMG-20251216-WA0123.jpg",
          "IMG-20251216-WA0124.jpg",
          "IMG-20251216-WA0125.jpg",
          "IMG-20251216-WA0126.jpg",
          "IMG-20251216-WA0127.jpg",
        ]
      },

      {
        id: "6",
        name: "Zapatillas Vanz Knu",
        category: "Hombre/Mujer",
        type: "Zapatillas",
        brand: "Vanz Knu", 
        price: 40000,
        quality: ["Premium","Plantilla en gel","Papel seda","Cordones gruesos"], 
        note: "Talles en cada foto ü•≥",
        images: [
          "IMG-20251215-WA0066.jpg",
          "IMG-20251215-WA0068.jpg",
          "IMG-20251215-WA0067.jpg",
          "IMG-20251215-WA0069.jpg",
          "IMG-20251215-WA0070.jpg",
          "IMG-20251215-WA0071.jpg",
        ]
      },

      {
        id: "7",
        name: "Zapatillas Vanz U Upland",
        category: "Hombre/Mujer",
        type: "Zapatillas",
        brand: "Vanz U Upland", 
        price: 42000,
        quality: ["Premium"], 
        note: "Talles 34 al 43 excepto las ultimas dos solo hasta el 39",
        images: [
          "IMG-20251215-WA0072.jpg",
          "IMG-20251215-WA0073.jpg",
          "IMG-20251215-WA0074.jpg",
          "IMG-20251215-WA0075.jpg",
          "IMG-20251215-WA0076.jpg",
        ]
      },

       {
        id: "8",
        name: "Zapatillas Puma",
        category: "Hombre/Mujer",
        type: "Zapatillas",
        brand: "Linea Premium", 
        price: 35000,
        quality: [], 
        note: "Talles 34 al 39",
        images: [
          "IMG-20251215-WA0030.jpg",
          "IMG-20251215-WA0035.jpg",
          "IMG-20251215-WA0032.jpg",
          "IMG-20251215-WA0033.jpg",
          "IMG-20251215-WA0034.jpg",
          "IMG-20251215-WA0026.jpg",
        ]
      },

    ];

    // ================
    // helpers
    // ================
    const $ = (s) => document.querySelector(s);
    const fmtARS = (n) => {
      try {
        return new Intl.NumberFormat("es-AR", { style:"currency", currency:"ARS", maximumFractionDigits:0 }).format(n);
      } catch {
        return "$" + String(n).replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }
    };

    function uniqSorted(arr){
      return [...new Set(arr.filter(Boolean))].sort((a,b)=>a.localeCompare(b,"es"));
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function buildWhatsAppLink(p, selectedIndex){
      // ‚úÖ Mensaje pensado para que el cliente elija "foto/opci√≥n" sin escribir colores
      const opt = (typeof selectedIndex === "number") ? (selectedIndex + 1) : 1;

      const qualities = (p.quality && p.quality.length)
        ? `Calidad: ${p.quality.join(" / ")}`
        : "";

      const msg = [
        "Hola! Quiero reservar:",
        `‚Ä¢ Modelo: ${p.name}`,
        `‚Ä¢ Marca: ${p.brand}`,
        `‚Ä¢ Precio: ${fmtARS(p.price)}`,
        qualities ? `‚Ä¢ ${qualities}` : "",
        `‚Ä¢ Opci√≥n (foto): #${opt}`,
        "",
        "Te mando captura del color/opci√≥n que quiero."
      ].filter(Boolean).join("\n");

      return `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
    }

    // ================
    // UI render
    // ================
    const state = {
      q: "",
      cat: "",
      type: "",
      brand: "",
      selectedImage: {} // productId -> index
    };

    function fillSelects(){
      const cats = uniqSorted(PRODUCTS.map(p=>p.category));
      const types = uniqSorted(PRODUCTS.map(p=>p.type));
      const brands = uniqSorted(PRODUCTS.map(p=>p.brand));

      const $cat = $("#cat");
      const $type = $("#type");
      const $brand = $("#brand");

      cats.forEach(v=>{
        const o = document.createElement("option");
        o.value = v; o.textContent = v;
        $cat.appendChild(o);
      });
      types.forEach(v=>{
        const o = document.createElement("option");
        o.value = v; o.textContent = v;
        $type.appendChild(o);
      });
      brands.forEach(v=>{
        const o = document.createElement("option");
        o.value = v; o.textContent = v;
        $brand.appendChild(o);
      });
    }

    function matches(p){
      const q = state.q.trim().toLowerCase();
      if(q){
        const hay = [
          p.name, p.category, p.type, p.brand,
          ...(p.quality || [])
        ].join(" ").toLowerCase();
        if(!hay.includes(q)) return false;
      }
      if(state.cat && p.category !== state.cat) return false;
      if(state.type && p.type !== state.type) return false;
      if(state.brand && p.brand !== state.brand) return false;
      return true;
    }

    function render(){
      const list = PRODUCTS.filter(matches);
      const grid = $("#grid");
      grid.innerHTML = "";

      list.forEach(p=>{
        if(state.selectedImage[p.id] == null) state.selectedImage[p.id] = 0;

        const active = Math.max(0, Math.min(state.selectedImage[p.id], (p.images?.length||1)-1));
        state.selectedImage[p.id] = active;

        const heroSrc = (p.images && p.images.length) ? p.images[active] : "";

        const qualities = (p.quality && p.quality.length) ? p.quality : [];
        const tagHTML = [
          p.category ? `<span class="tag">${escapeHtml(p.category)}</span>` : "",
          p.type ? `<span class="tag">${escapeHtml(p.type)}</span>` : "",
          p.brand ? `<span class="tag">${escapeHtml(p.brand)}</span>` : "",
          ...qualities.map(q => `<span class="tag">${escapeHtml(q)}</span>`)
        ].filter(Boolean).join("");

        const card = document.createElement("article");
        card.className = "card";

        card.innerHTML = `
          <div class="hero" data-open="1">
            ${heroSrc ? `<img src="${escapeHtml(heroSrc)}" alt="${escapeHtml(p.name)}" />` : ""}
          </div>

          ${p.images && p.images.length > 1 ? `
            <div class="thumbs">
              ${p.images.map((src, idx)=>`
                <div class="thumb ${idx===active?'active':''}" data-idx="${idx}" title="Opci√≥n ${idx+1}">
                  <img src="${escapeHtml(src)}" alt="Opci√≥n ${idx+1}">
                </div>
              `).join("")}
            </div>
          ` : `<div style="height:6px"></div>`}

          <div class="content">
            <div class="tagrow">${tagHTML}</div>

            <div class="name">${escapeHtml(p.name)}</div>
            <p class="note">${escapeHtml(p.note || "")}</p>

            <div class="priceRow">
              <div>
                <div class="priceLabel">Precio</div>
                <div class="price">${escapeHtml(fmtARS(p.price))}</div>
              </div>
              <div class="rightHint">
                <div>Eleg√≠ la foto/opci√≥n</div>
                <div style="opacity:.85">y reserv√° por WhatsApp</div>
              </div>
            </div>

            <button class="btn" data-wa="1">Reservar por WhatsApp</button>
          </div>
        `;

        // thumbs click
        const thumbs = card.querySelectorAll(".thumb");
        thumbs.forEach(t=>{
          t.addEventListener("click", (e)=>{
            const idx = Number(t.getAttribute("data-idx"));
            state.selectedImage[p.id] = idx;
            render();
          });
        });

        // open modal
        const hero = card.querySelector(".hero");
        if(hero){
          hero.addEventListener("click", ()=>{
            openModal(p, state.selectedImage[p.id] || 0);
          });
        }

        // WhatsApp button
        const btn = card.querySelector("[data-wa='1']");
        btn.addEventListener("click", ()=>{
          const link = buildWhatsAppLink(p, state.selectedImage[p.id]);
          window.open(link, "_blank", "noopener,noreferrer");
        });

        grid.appendChild(card);
      });

      if(!list.length){
        const empty = document.createElement("div");
        empty.className = "card";
        empty.innerHTML = `
          <div class="content">
            <div class="name">No se encontraron productos</div>
            <p class="note">Prob√° con otra palabra o limpi√° los filtros.</p>
          </div>
        `;
        grid.appendChild(empty);
      }
    }

    // Modal
    function openModal(p, startIdx){
      const modal = $("#modal");
      const img = $("#modalImg");
      const title = $("#modalTitle");
      const thumbs = $("#modalThumbs");

      const images = (p.images && p.images.length) ? p.images : [];
      let idx = Math.max(0, Math.min(startIdx || 0, images.length-1));

      title.textContent = `${p.name} ‚Äî Opci√≥n ${idx+1}`;
      img.src = images[idx] || "";

      thumbs.innerHTML = "";
      images.forEach((src, i)=>{
        const d = document.createElement("div");
        d.className = "thumb " + (i===idx ? "active" : "");
        d.innerHTML = `<img src="${escapeHtml(src)}" alt="Opci√≥n ${i+1}">`;
        d.addEventListener("click", ()=>{
          idx = i;
          state.selectedImage[p.id] = i;
          title.textContent = `${p.name} ‚Äî Opci√≥n ${idx+1}`;
          img.src = images[idx] || "";
          openModal(p, idx); // re-render thumbs active
        });
        thumbs.appendChild(d);
      });

      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");
    }

    function closeModal(){
      const modal = $("#modal");
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
    }

    // Events controls
    function wireControls(){
      $("#q").addEventListener("input", (e)=>{
        state.q = e.target.value;
        render();
      });
      $("#cat").addEventListener("change", (e)=>{
        state.cat = e.target.value;
        render();
      });
      $("#type").addEventListener("change", (e)=>{
        state.type = e.target.value;
        render();
      });
      $("#brand").addEventListener("change", (e)=>{
        state.brand = e.target.value;
        render();
      });

      $("#closeModal").addEventListener("click", closeModal);
      $("#modal").addEventListener("click", (e)=>{
        if(e.target && e.target.id === "modal") closeModal();
      });
      window.addEventListener("keydown", (e)=>{
        if(e.key === "Escape") closeModal();
      });
    }

    // Init
    fillSelects();
    wireControls();
    render();
  </script>

  <!--
  ================================
  ‚úÖ PLANTILLA PARA AGREGAR PRODUCTOS
  Copi√°/peg√° un bloque dentro de PRODUCTS y edit√°:
  - name, category, type, brand, price, quality, note, images[]
  - images[]: pon√© los nombres EXACTOS de los archivos subidos al repo
  ================================
  {
    id: "un-id-unico",
    name: "Nombre del producto",
    category: "Mujer / Hombre / Infantil",
    type: "Ojotas / Zapatillas / Botines / Zapatos / etc",
    brand: "Nike / Adidas / Puma / Varios",
    price: 14200,
    quality: ["Premium", "S√∫per Luxo"],
    note: "Talles en cada foto üòâüëá (eleg√≠ la foto/opci√≥n)",
    images: ["foto1.jpg","foto2.jpg","foto3.jpg"]
  }
  -->
</body>
</html>
